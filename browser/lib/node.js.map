{"version":3,"sources":["../../src/node.js"],"names":[],"mappings":";;;;;;;;;;;kBAEwB,Y;;AAFxB;;;;;EAEe,SAAS,YAAT,CAAsB,QAAtB,EAAgC;AAC3C,QAAM,cAAc,kBAAgB,QAAhB,CAApB;;AAEA,W;;;;aAAO,SAAS,KAAT,CAAe,CAAf,QAAuC;AAAA,gBAAnB,QAAmB,QAAnB,QAAmB;AAAA,gBAAT,KAAS,QAAT,KAAS;;AAC1C,gBAAI,QAAQ,SAAS,KAArB;;AAEA,gBAAI,CAAC,KAAL,EAAY;AACR;AACH;;AAED,gBAAM,yBAAiB,QAAjB,IAA2B,YAA3B,GAAN;AACA,mBAAO,UAAU,KAAjB;;AAEA,gBAAI,MAAM,aAAV,EAAyB;;AAErB,0BAAU,WAAV,GAAwB,MAAM,UAAN,CAAiB,OAAjB,EAAxB;AACA,wBAAQ,MAAM,aAAd;AACH;;AAED,wBAAY,YAAZ,CACI,KADJ,EAEI;AACI,uBAAO;AADX,aAFJ;AAMH;AAtBD;AAuBH","file":"node.js","sourcesContent":["import { Client as RavenClient } from 'raven';\n\nexport default function sentryOutput(ravenUrl) {\n    const ravenClient = new RavenClient(ravenUrl);\n\n    return function write(_, { metadata, extra }) {\n        let error = metadata.error;\n\n        if (!error) {\n            return;\n        }\n\n        const extraData = { ...metadata, extra };\n        delete extraData.error;\n\n        if (error.originalError) {\n            // error-processor\n            extraData.parsedStack = error.stackTrace.toArray();\n            error = error.originalError;\n        }\n\n        ravenClient.captureError(\n            error,\n            {\n                extra: extraData,\n            }\n        );\n    };\n}\n"]}